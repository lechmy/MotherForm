function AjaxForm(t){const a="[MotherForm] | Error:",e={NONE:"none",PAGE:"pagination",SCROLL:"infinite-scroll",LOAD:"load-more"},n={MINIMAL:"< (x/y) >",BASIC:"< [5] >",STANDARD:"<< < [5] > >>",EXTENDED:"<< < ~ >... [5] ...< ~ > >>"},i={form:"",container:"",additionalData:{},queryParams:!1,pagination:{type:e.NONE,pattern:n.BASIC,container:"",pageSize:0,pageCount:0,totalCount:0},paginationModel:{response:"data",pageSize:"pagesize",pageNumber:"pagenumber",pageCount:"pageCount",totalCount:"totalCount"},beforesend:()=>{},response:t=>{this.conf.pagination.type==e.LOAD||this.conf.pagination.type==e.SCROLL?this.conf.container.insertAdjacentHTML("beforeend",t):this.conf.container.innerHTML=t}};return this.conf={},this.events=["change","submit"],this.xhttp=new XMLHttpRequest,this.paginationPattern=n,this.activePage=1,this.paginationEnabled=!1,this.pageCount=1,this.IsBusy=!1,this.parseDataAtt=(t=>{let a=this.conf.form.getAttribute(t);return null!=a?JSON.parse(a.replaceAll("'",'"')):null}),this.setForm=(t=>{if(this.conf.form="string"==typeof t?document.querySelector(t):t,null===this.conf.form)return console.error(`${a} FORM not found`),!1}),this.setContainer=(()=>{let t=this.conf.form.getAttribute("data-mf-container");if(t=null!=t?t:this.conf.container,this.conf.container=document.querySelector(t),null===this.conf.container)return console.error(`${a} CONTAINER not found`),!1}),this.setQueryParamsSettings=(()=>{this.conf.queryParams="true"===this.conf.form.getAttribute("data-mf-query-params")||this.conf.queryParams}),this.setAdditionalData=(t=>{let a=this.parseDataAtt("data-mf-pgn");a=null!=a?a:null,this.conf.additionalData=t||a||this.conf.additionalData}),this.setPaginationContainer=(()=>{if(this.conf.pagination.container=document.querySelector(this.conf.pagination.container),null===this.conf.pagination.container)return console.error(`${a} Pagination container is not HTML element`),!1;this.conf.pagination.container.classList.add("mf-pagination-container")}),this.setTotalCount=(t=>{let a=this.parseDataAtt("data-mf-pgn");a=null!=a?parseInt(a.totalCount):null,this.conf.pagination.totalCount=t||a||this.conf.pagination.totalCount,this.setPageCount()}),this.setPageSize=(t=>{let a=this.parseDataAtt("data-mf-pgn");a=null!=a?parseInt(a.pageSize):null,this.conf.pagination.pageSize=t||a||this.conf.pagination.pageSize}),this.setPageCount=(t=>{let a=parseInt(t),e=this.parseDataAtt("data-mf-pgn");e=null!=e?parseInt(e.pageCount):null;let n=Math.floor(this.conf.pagination.totalCount/this.conf.pagination.pageSize)||1;this.activePage=this.activePage>a?a:this.activePage,this.activePage=this.activePage>n?n:this.activePage,this.pageCount=a||e||n||this.conf.pagination.pageCount}),this.setPaginationParameters=(()=>{let t=this.parseDataAtt("data-mf-pgn");null!=t&&Object.assign(this.conf.pagination,t)}),this.setPaginationModel=(()=>{let t=this.parseDataAtt("data-mf-pgn-model");null!=t&&Object.assign(this.conf.paginationModel,t)}),this.readystatechange=(()=>{if(this.xhttp.readyState===XMLHttpRequest.DONE)if(200===this.xhttp.status){let t=this.xhttp.response;this.paginationEnabled&&(this.paginationEnabled&&(this.conf.pagination.type==e.PAGE&&this.renderPagination(),this.conf.pagination.type==e.LOAD&&this.renderLoadMore()),t=this.xhttp.response[this.conf.paginationModel.response]||t),this.conf.response(t)}else console.error(`${a} There was a problem with the request. status code: ${this.xhttp.status}`)}),this.loadstart=(()=>{this.conf.container.classList.add("mf-loading"),this.conf.beforesend(),this.IsBusy=!0}),this.loadend=(()=>{setTimeout(()=>{this.conf.container.classList.remove("mf-loading"),this.IsBusy=!1},300)}),this.setData=(()=>{const t=this.conf.form;let e=this.getFormData(t);if(null===e)return console.error(`${a} Parsing form didn't gather data, make sure you add 'name' attribute to <input> elements`),!1;!0===this.conf.queryParams&&this.setQueryParams(e);const n={url:t.action,method:t.method,data:e};this.sendFormData(n)}),this.sendFormData=(t=>{if("post"==t.method.toLowerCase())this.xhttp.open(t.method,t.url,!0),this.xhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.xhttp.send(t.data);else{const a=t.url+"?"+t.data;this.xhttp.open(t.method,a,!0),this.xhttp.send()}}),this.getFormData=(t=>{let a="";for(let e of t.elements)null!=e.attributes.name&&""!=e.attributes.name.value.trim()&&(a+=e.attributes.name.value+"="+encodeURIComponent(e.value)+"&");if(this.paginationEnabled){let t=this.conf.pagination,e=this.conf.paginationModel;null!==e.pageSize&&(a+=e.pageSize+"="+t.pageSize+"&"),null!==e.pageNumber&&(a+=e.pageNumber+"="+this.activePage+"&")}return""!=a?a.slice(0,-1):null}),this.setQueryParams=(t=>{let a=location.pathname;"/"==a.slice(-1)?a=a.slice(0,-1)+"?":a+="?",a+=t,window.history.replaceState(null,"",a)}),this.setPage=(t=>{if(this.IsBusy)return!1;let a=this.activePage;const e=t.currentTarget.getAttribute("data-mf-pgn-page");switch(e){case"first":this.activePage=1;break;case"prev":this.activePage=this.activePage>1?this.activePage-1:1;break;case"next":this.activePage=this.activePage<this.pageCount?this.activePage+1:this.pageCount;break;case"last":this.activePage=this.pageCount;break;default:this.activePage=parseInt(e)}if(this.activePage==a)return!1;this.setData()}),this.getRenderConfig=(()=>{let t=this.parsePaginationRange(this.conf.pagination.pattern);if(null==t)return element=null,console.error(`${a} Parameter number of pages is not a number`),{firstDot:!1,firstBtn:!1,lastBtn:!1,lastDot:!1,rangeStart:0,rangeStop:-1};if(this.pageCount-t<=1)return{firstDot:!1,firstBtn:!1,lastBtn:!1,lastDot:!1,rangeStart:1,rangeStop:this.pageCount};let e=0,n=Math.floor(t/2),i=this.activePage-(n+e);i<n&&(i=1);let s=i+t-1;this.pageCount-s<2&&(i=this.pageCount-t+1,s=this.pageCount);let o=i>2,r=i>1,h=s<this.pageCount-1,p=s<this.pageCount;return{firstDot:o,firstBtn:r,lastDot:h,lastBtn:p,rangeStart:i,rangeStop:s}}),this.renderPagination=(()=>{this.conf.pagination.container.innerHTML="";let t=this.conf.pagination.pattern.split(" "),a=this.getRenderConfig();t.forEach(t=>{let e="",n="",i="";switch(t){case"<<":e='<button class="mf-pgn-btn mf-pgn-first" data-mf-pgn-page="first"><span class="mf-icon-first"></span></button>';break;case"<":e='<button class="mf-pgn-btn mf-pgn-prev" data-mf-pgn-page="prev"><span class="mf-icon-prev"></span></button>';break;case">":e='<button class="mf-pgn-btn mf-pgn-next" data-mf-pgn-page="next"><span class="mf-icon-next"></span></button>';break;case">>":e='<button class="mf-pgn-btn mf-pgn-last" data-mf-pgn-page="last"><span class="mf-icon-last"></span></button>';break;case">...":n=a.firstBtn?'<button class="mf-pgn-btn" data-mf-pgn-page="first">1</button>':"",i=a.firstDot?'<span class="mf-pgn-dots">...</span>':"",e=n+i;break;case"...<":n=a.lastBtn?`<button class="mf-pgn-btn" data-mf-pgn-page="last">${this.pageCount}</button>`:"",i=a.lastDot?'<span class="mf-pgn-dots">...</span>':"",e=i+n;break;case"(x/y)":e=`<span class="mf-pgn-count">${this.activePage} / ${this.pageCount}</span>`;break;case"...":e='<span class="mf-pgn-dots">...</span>';break;case"~":e='<span class="mf-pgn-space"></span>';break;default:for(let t=a.rangeStart;t<=a.rangeStop;t++)e+=`<button class="mf-pgn-btn${this.activePage==t?" active":""}" data-mf-pgn-page="${t}">${t}</button>`}null!==e&&this.conf.pagination.container.insertAdjacentHTML("beforeend",e)}),document.querySelectorAll("[data-mf-pgn-page]").forEach(t=>{t.addEventListener("click",this.setPage)})}),this.parsePaginationRange=(t=>{let a=t.match(/[0-9]{1,2}/);return null!=a&&a.length?parseInt(a[0]):null}),this.renderLoadMore=(()=>{if(this.conf.pagination.container.innerHTML="",this.activePage>=this.pageCount)return!1;let t='<button class="mf-pgn-btn mf-pgn-load-more" data-mf-pgn-page="next">Load More</button>';this.conf.pagination.container.insertAdjacentHTML("beforeend",t),document.querySelector("[data-mf-pgn-page]").addEventListener("click",this.setPage)}),this.setInfiniteScroll=(()=>{document.addEventListener("scroll",t=>{if(this.IsBusy)return!1;this.conf.container.getBoundingClientRect().bottom-window.innerHeight<150&&this.activePage<this.pageCount&&(this.activePage++,this.setData())})}),this.initPagination=(()=>{if(!this.paginationEnabled)return!1;switch(this.setPaginationParameters(),this.setPaginationModel(),this.setPaginationContainer(),this.setPageCount(),this.conf.pagination.type){case e.PAGE:this.renderPagination();break;case e.SCROLL:this.setInfiniteScroll();break;case e.LOAD:this.renderLoadMore()}}),(()=>{let a=Object.assign({},i.pagination,t.pagination),n=Object.assign({},i.paginationModel,t.paginationModel);this.conf=Object.assign(i,t,{pagination:a},{paginationModel:n}),this.paginationEnabled=this.conf.pagination.type!==e.NONE,this.setForm(this.conf.form),this.setContainer(),this.setQueryParamsSettings(),this.initPagination(),this.xhttp.onreadystatechange=this.readystatechange,this.xhttp.onloadstart=this.loadstart,this.xhttp.onloadend=this.loadend,this.events.forEach(t=>{this.conf.form.addEventListener(t,t=>{t.preventDefault(),this.setData()})})})(),this}document.querySelectorAll("[data-mf-init]").forEach(t=>{new AjaxForm({form:t})});